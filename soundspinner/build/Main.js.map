{"version":3,"sources":["webpack:///build/Main.js","webpack:///webpack/bootstrap 95929e3e49b431245b0e","webpack:///./app/Main.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","parentJsonpFunction","window","chunkIds","moreModules","chunkId","i","callbacks","length","installedChunks","push","apply","Object","prototype","hasOwnProperty","shift","0","e","callback","undefined","head","document","getElementsByTagName","script","createElement","type","charset","async","src","p","appendChild","m","c","__WEBPACK_AMD_REQUIRE_ARRAY__","domReady","UserInterface","mainStyle","Waveform","Recorder","Player","Loader","StartAudioContext","Tone","Microphone","animateIn","setTimeout","interface","waveform","loop","requestAnimationFrame","speed","rotationSpeed","isDragging","dragSpeed","alpha","computedSpeed","player","recorder","isRecording","setRotation","position","Math","PI","recordTime","buttonTimeout","body","on","drag","open","start","stopRecording","setBuffer","audioBuffer","parent","postMessage","stop","clearTimeout","supported","disableRecording","console","log","waveDisplay","buffer","isIOS","test","navigator","userAgent","MSStream","iOSTapper","context","then","remove"],"mappings":"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","file":"./build/Main.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// install a JSONP callback for chunk loading\n/******/ \tvar parentJsonpFunction = window[\"webpackJsonp\"];\n/******/ \twindow[\"webpackJsonp\"] = function webpackJsonpCallback(chunkIds, moreModules) {\n/******/ \t\t// add \"moreModules\" to the modules object,\n/******/ \t\t// then flag all \"chunkIds\" as loaded and fire callback\n/******/ \t\tvar moduleId, chunkId, i = 0, callbacks = [];\n/******/ \t\tfor(;i < chunkIds.length; i++) {\n/******/ \t\t\tchunkId = chunkIds[i];\n/******/ \t\t\tif(installedChunks[chunkId])\n/******/ \t\t\t\tcallbacks.push.apply(callbacks, installedChunks[chunkId]);\n/******/ \t\t\tinstalledChunks[chunkId] = 0;\n/******/ \t\t}\n/******/ \t\tfor(moduleId in moreModules) {\n/******/ \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n/******/ \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n/******/ \t\t\t}\n/******/ \t\t}\n/******/ \t\tif(parentJsonpFunction) parentJsonpFunction(chunkIds, moreModules);\n/******/ \t\twhile(callbacks.length)\n/******/ \t\t\tcallbacks.shift().call(null, __webpack_require__);\n/******/\n/******/ \t};\n/******/\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// object to store loaded and loading chunks\n/******/ \t// \"0\" means \"already loaded\"\n/******/ \t// Array means \"loading\", array contains callbacks\n/******/ \tvar installedChunks = {\n/******/ \t\t0:0\n/******/ \t};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/ \t// This file contains only the entry chunk.\n/******/ \t// The chunk loading function for additional chunks\n/******/ \t__webpack_require__.e = function requireEnsure(chunkId, callback) {\n/******/ \t\t// \"0\" is the signal for \"already loaded\"\n/******/ \t\tif(installedChunks[chunkId] === 0)\n/******/ \t\t\treturn callback.call(null, __webpack_require__);\n/******/\n/******/ \t\t// an array means \"currently loading\".\n/******/ \t\tif(installedChunks[chunkId] !== undefined) {\n/******/ \t\t\tinstalledChunks[chunkId].push(callback);\n/******/ \t\t} else {\n/******/ \t\t\t// start chunk loading\n/******/ \t\t\tinstalledChunks[chunkId] = [callback];\n/******/ \t\t\tvar head = document.getElementsByTagName('head')[0];\n/******/ \t\t\tvar script = document.createElement('script');\n/******/ \t\t\tscript.type = 'text/javascript';\n/******/ \t\t\tscript.charset = 'utf-8';\n/******/ \t\t\tscript.async = true;\n/******/\n/******/ \t\t\tscript.src = __webpack_require__.p + \"./build/\" + chunkId + \".js\";\n/******/ \t\t\thead.appendChild(script);\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/*!*********************!*\\\n  !*** ./app/Main.js ***!\n  \\*********************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/**\n\t * Copyright 2016 Google Inc.\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\");\n\t * you may not use this file except in compliance with the License.\n\t * You may obtain a copy of the License at\n\t *\n\t *     http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing, software\n\t * distributed under the License is distributed on an \"AS IS\" BASIS,\n\t * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n\t * See the License for the specific language governing permissions and\n\t * limitations under the License.\n\t */\n\t\n\t__webpack_require__.e/* require */(1, function(__webpack_require__) { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! domready */ 1), __webpack_require__(/*! interface/UserInterface */ 2), __webpack_require__(/*! main.scss */ 15), __webpack_require__(/*! mic/Waveform */ 17), __webpack_require__(/*! mic/Recorder */ 23), __webpack_require__(/*! mic/Player */ 43), \n\t\t__webpack_require__(/*! mic/Loader */ 44), __webpack_require__(/*! StartAudioContext */ 46), __webpack_require__(/*! Tone/core/Tone */ 25), __webpack_require__(/*! Tone/source/Microphone */ 24)]; (function(domReady, UserInterface, mainStyle, Waveform, Recorder, Player, Loader, StartAudioContext, Tone, Microphone){\n\t\n\t\tdomReady(function(){\n\t\t\tvar recordTime = 3;\n\t\n\t\t\tvar buttonTimeout  = -1;\n\t\t\tvar currentRotation = 0;\n\t\t\tvar rotationSpeed = 0;\n\t\t\tvar isDragging = false;\n\t\t\tvar dragSpeed = 0;\n\t\t\tvar computedSpeed = 0;\n\t\n\t\t\t//INTERFACE////////////////////////////////////////////////\n\t\n\t\t\tvar interface = new UserInterface(recordTime * 1000, document.body);\n\t\n\t\t\tinterface.on(\"SpeedControllUpdate\", function(speed){\n\t\t\t\trotationSpeed = speed;\n\t\t\t});\n\t\n\t\t\tinterface.on(\"dragRateUpdate\", function(drag){\n\t\t\t\tdragSpeed = (drag * 10);\n\t\t\t\t// currentRotation += drag;\n\t\t\t});\n\t\n\t\t\tinterface.on(\"StartWaveDrag\", function(){\n\t\t\t\tisDragging = true;\n\t\t\t});\n\t\n\t\t\tinterface.on(\"EndWaveDrag\", function(){\n\t\t\t\tdragSpeed = 0;\n\t\t\t\tisDragging = false;\n\t\t\t});\n\t\n\t\t\tinterface.on(\"StartRecord\", function(drag){\n\t\t\t\tplayer.speed = 0;\n\t\t\t\tplayer.position = 0;\n\t\t\t\trecorder.open(function(){\n\t\t\t\t\trecorder.start();\n\t\t\t\t\tbuttonTimeout = setTimeout(function(){\n\t\t\t\t\t\tinterface.stopRecording();\n\t\t\t\t\t\tplayer.setBuffer(recorder.audioBuffer);\n\t\t\t\t\t}, recordTime * 1000);\n\t\t\t\t}, function(e){\n\t\t\t\t\t//denied\n\t\t\t\t\twindow.parent.postMessage(\"error3\",\"*\");\n\t\t\t\t});\n\t\t\t});\n\t\n\t\t\tinterface.on(\"StopRecord\", function(drag){\n\t\t\t\trecorder.stop();\n\t\t\t\tplayer.setBuffer(recorder.audioBuffer);\n\t\t\t\tclearTimeout(buttonTimeout);\n\t\t\t});\n\t\n\t\t\tif (!Microphone.supported){\n\t\t\t\tinterface.disableRecording(function(){\n\t\t\t\t\t//unsupported\n\t\t\t\t\tconsole.log(\"unsupported\");\n\t\t\t\t\twindow.parent.postMessage(\"error2\",\"*\");\n\t\t\t\t});\n\t\t\t}\n\t\n\t\n\t\t\t//AUDIO////////////////////////////////////////////////\n\t\n\t\t\tvar recorder = new Recorder(recordTime);\n\t\n\t\t\tvar twoPI = Math.PI * 2;\n\t\n\t\t\tvar player = new Player(recordTime);\n\t\n\t\t\tvar waveform = new Waveform(interface.waveDisplay, recorder);\n\t\n\t\t\tfunction animateIn(){\n\t\t\t\t//bring everything in\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\tinterface.animateIn();\n\t\t\t\t\twaveform.animateIn(750);\n\t\t\t\t}, 100);\n\t\t\t}\n\t\n\t\t\tvar loader = new Loader(function(buffer){\n\t\t\t\trecorder.setBuffer(buffer);\n\t\t\t\tplayer.setBuffer(buffer);\n\t\n\t\t\t\twindow.parent.postMessage(\"loaded\", \"*\");\n\t\n\t\t\t\t//send the ready message to the parent\n\t\t\t\tvar isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n\t\n\t\t\t\t//full screen button on iOS\n\t\t\t\tif (isIOS){\n\t\t\t\t\t//make a full screen element and put it in front\n\t\t\t\t\tvar iOSTapper = document.createElement(\"div\");\n\t\t\t\t\tiOSTapper.id = \"iOSTap\";\n\t\t\t\t\tdocument.body.appendChild(iOSTapper);\n\t\t\t\t\tnew StartAudioContext(Tone.context, iOSTapper).then(function() {\n\t\t\t\t\t\tiOSTapper.remove();\n\t\t\t\t\t\twindow.parent.postMessage(\"ready\",\"*\");\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tanimateIn();\n\t\t\t\t\twindow.parent.postMessage(\"ready\",\"*\");\n\t\t\t\t}\n\t\t\t});\n\t\n\t\t\t//LOOOOOOOOOP////////////////////////////////////////////////\n\t\t\tvar lastFrame = -1;\n\t\n\t\t\tvar rotationQuotient = (Math.PI * 2 / 1000);\n\t\n\t\t\tfunction loop(){\n\t\t\t\trequestAnimationFrame(loop);\n\t\t\t\tvar speed = rotationSpeed;\n\t\t\t\tif (isDragging){\n\t\t\t\t\tspeed = dragSpeed;\n\t\t\t\t} \n\t\t\t\tvar alpha = 0.05;\n\t\n\t\t\t\tcomputedSpeed = alpha * speed + (1 - alpha) * computedSpeed;\n\t\n\t\t\t\tplayer.speed = computedSpeed;\n\t\n\t\t\t\tif (!recorder.isRecording){\n\t\t\t\t\twaveform.setRotation(player.position * Math.PI * 2);\n\t\t\t\t} else {\n\t\t\t\t\tplayer.speed = 0;\n\t\t\t\t\twaveform.setRotation(0);\n\t\t\t\t}\n\t\t\t}\n\t\t\tloop();\n\t\n\t\t});\n\t}.apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__));});\n\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// build/Main.js"," \t// install a JSONP callback for chunk loading\n \tvar parentJsonpFunction = window[\"webpackJsonp\"];\n \twindow[\"webpackJsonp\"] = function webpackJsonpCallback(chunkIds, moreModules) {\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, callbacks = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId])\n \t\t\t\tcallbacks.push.apply(callbacks, installedChunks[chunkId]);\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(chunkIds, moreModules);\n \t\twhile(callbacks.length)\n \t\t\tcallbacks.shift().call(null, __webpack_require__);\n\n \t};\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// \"0\" means \"already loaded\"\n \t// Array means \"loading\", array contains callbacks\n \tvar installedChunks = {\n \t\t0:0\n \t};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId, callback) {\n \t\t// \"0\" is the signal for \"already loaded\"\n \t\tif(installedChunks[chunkId] === 0)\n \t\t\treturn callback.call(null, __webpack_require__);\n\n \t\t// an array means \"currently loading\".\n \t\tif(installedChunks[chunkId] !== undefined) {\n \t\t\tinstalledChunks[chunkId].push(callback);\n \t\t} else {\n \t\t\t// start chunk loading\n \t\t\tinstalledChunks[chunkId] = [callback];\n \t\t\tvar head = document.getElementsByTagName('head')[0];\n \t\t\tvar script = document.createElement('script');\n \t\t\tscript.type = 'text/javascript';\n \t\t\tscript.charset = 'utf-8';\n \t\t\tscript.async = true;\n\n \t\t\tscript.src = __webpack_require__.p + \"./build/\" + chunkId + \".js\";\n \t\t\thead.appendChild(script);\n \t\t}\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 95929e3e49b431245b0e","/**\n * Copyright 2016 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nrequire([\"domready\", \"interface/UserInterface\", \"main.scss\", \"mic/Waveform\", \"mic/Recorder\", \"mic/Player\", \n\t\"mic/Loader\", \"StartAudioContext\", \"Tone/core/Tone\", \"Tone/source/Microphone\"], \n\tfunction(domReady, UserInterface, mainStyle, Waveform, Recorder, Player, Loader, StartAudioContext, Tone, Microphone){\n\n\tdomReady(function(){\n\t\tvar recordTime = 3;\n\n\t\tvar buttonTimeout  = -1;\n\t\tvar currentRotation = 0;\n\t\tvar rotationSpeed = 0;\n\t\tvar isDragging = false;\n\t\tvar dragSpeed = 0;\n\t\tvar computedSpeed = 0;\n\n\t\t//INTERFACE////////////////////////////////////////////////\n\n\t\tvar interface = new UserInterface(recordTime * 1000, document.body);\n\n\t\tinterface.on(\"SpeedControllUpdate\", function(speed){\n\t\t\trotationSpeed = speed;\n\t\t});\n\n\t\tinterface.on(\"dragRateUpdate\", function(drag){\n\t\t\tdragSpeed = (drag * 10);\n\t\t\t// currentRotation += drag;\n\t\t});\n\n\t\tinterface.on(\"StartWaveDrag\", function(){\n\t\t\tisDragging = true;\n\t\t});\n\n\t\tinterface.on(\"EndWaveDrag\", function(){\n\t\t\tdragSpeed = 0;\n\t\t\tisDragging = false;\n\t\t});\n\n\t\tinterface.on(\"StartRecord\", function(drag){\n\t\t\tplayer.speed = 0;\n\t\t\tplayer.position = 0;\n\t\t\trecorder.open(function(){\n\t\t\t\trecorder.start();\n\t\t\t\tbuttonTimeout = setTimeout(function(){\n\t\t\t\t\tinterface.stopRecording();\n\t\t\t\t\tplayer.setBuffer(recorder.audioBuffer);\n\t\t\t\t}, recordTime * 1000);\n\t\t\t}, function(e){\n\t\t\t\t//denied\n\t\t\t\twindow.parent.postMessage(\"error3\",\"*\");\n\t\t\t});\n\t\t});\n\n\t\tinterface.on(\"StopRecord\", function(drag){\n\t\t\trecorder.stop();\n\t\t\tplayer.setBuffer(recorder.audioBuffer);\n\t\t\tclearTimeout(buttonTimeout);\n\t\t});\n\n\t\tif (!Microphone.supported){\n\t\t\tinterface.disableRecording(function(){\n\t\t\t\t//unsupported\n\t\t\t\tconsole.log(\"unsupported\");\n\t\t\t\twindow.parent.postMessage(\"error2\",\"*\");\n\t\t\t});\n\t\t}\n\n\n\t\t//AUDIO////////////////////////////////////////////////\n\n\t\tvar recorder = new Recorder(recordTime);\n\n\t\tvar twoPI = Math.PI * 2;\n\n\t\tvar player = new Player(recordTime);\n\n\t\tvar waveform = new Waveform(interface.waveDisplay, recorder);\n\n\t\tfunction animateIn(){\n\t\t\t//bring everything in\n\t\t\tsetTimeout(function(){\n\t\t\t\tinterface.animateIn();\n\t\t\t\twaveform.animateIn(750);\n\t\t\t}, 100);\n\t\t}\n\n\t\tvar loader = new Loader(function(buffer){\n\t\t\trecorder.setBuffer(buffer);\n\t\t\tplayer.setBuffer(buffer);\n\n\t\t\twindow.parent.postMessage(\"loaded\", \"*\");\n\n\t\t\t//send the ready message to the parent\n\t\t\tvar isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n\n\t\t\t//full screen button on iOS\n\t\t\tif (isIOS){\n\t\t\t\t//make a full screen element and put it in front\n\t\t\t\tvar iOSTapper = document.createElement(\"div\");\n\t\t\t\tiOSTapper.id = \"iOSTap\";\n\t\t\t\tdocument.body.appendChild(iOSTapper);\n\t\t\t\tnew StartAudioContext(Tone.context, iOSTapper).then(function() {\n\t\t\t\t\tiOSTapper.remove();\n\t\t\t\t\twindow.parent.postMessage(\"ready\",\"*\");\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tanimateIn();\n\t\t\t\twindow.parent.postMessage(\"ready\",\"*\");\n\t\t\t}\n\t\t});\n\n\t\t//LOOOOOOOOOP////////////////////////////////////////////////\n\t\tvar lastFrame = -1;\n\n\t\tvar rotationQuotient = (Math.PI * 2 / 1000);\n\n\t\tfunction loop(){\n\t\t\trequestAnimationFrame(loop);\n\t\t\tvar speed = rotationSpeed;\n\t\t\tif (isDragging){\n\t\t\t\tspeed = dragSpeed;\n\t\t\t} \n\t\t\tvar alpha = 0.05;\n\n\t\t\tcomputedSpeed = alpha * speed + (1 - alpha) * computedSpeed;\n\n\t\t\tplayer.speed = computedSpeed;\n\n\t\t\tif (!recorder.isRecording){\n\t\t\t\twaveform.setRotation(player.position * Math.PI * 2);\n\t\t\t} else {\n\t\t\t\tplayer.speed = 0;\n\t\t\t\twaveform.setRotation(0);\n\t\t\t}\n\t\t}\n\t\tloop();\n\n\t});\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/Main.js\n// module id = 0\n// module chunks = 0"],"sourceRoot":""}